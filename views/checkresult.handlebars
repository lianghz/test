<table id="checkresult-dg" title="生动化检查结果" style="width:100%;height:250px;border-top:0px;" toolbar="#toolbar" data-options="singleSelect:true,collapsible:true,method:'get',fit:true,border:false,">
    {{!--
    <thead>
        <tr>
            <th field="sku" width="50">sku</th>
            <th field="description" width="50">description</th>
            <th field="price" width="50">price</th>
            <th field="inSeason2" width="50">inSeason2</th>
        </tr>
    </thead>--}}
</table>
<div id="toolbar">
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newUser()">New User</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editUser()">Edit User</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyUser()">Remove User</a>
    <input id="checkresult-txt-bu" style="width:70px;height:25px">
    <input id="checkresult-txt-loc" style="width:100px;height:25px">
    <input id="checkresult-txt-outlet" style="width:100px;height:25px">
    <input id="checkresult-txt-name" style="width:200px;height:25px">
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-search" plain="true" onclick="searchResult()" />
</div>
<input id="params" type="hidden" name="referrer" value="{{params}}">

<script>
    var params = $('#params').val();
    params = eval(params);

    $('#checkresult-dg').datagrid({
        url: '/getresult',
        pagePosition: 'bottom',
        pagination: true,
        pageSize: 30,
        singleSelect: false,
        columns: [params]
    });

    $(function () {
        //-----
        $('#checkresult-txt-bu').textbox({
            prompt: '查询BU',
            icons: [{
                iconCls: 'icon-clear',
                handler: function (e) {
                    $(e.data.target).textbox('clear');
                }
            }]
        });
        $('#checkresult-txt-loc').textbox({
            prompt: '查询办事处',
            icons: [{
                iconCls: 'icon-clear',
                handler: function (e) {
                    $(e.data.target).textbox('clear');
                }
            }]
        });
        $('#checkresult-txt-outlet').textbox({
            prompt: '查询售点',
            icons: [{
                iconCls: 'icon-clear',
                handler: function (e) {
                    $(e.data.target).textbox('clear');
                }
            }]
        });
        $('#checkresult-txt-name').textbox({
            prompt: '查询店名',
            icons: [{
                iconCls: 'icon-clear',
                handler: function (e) {
                    $(e.data.target).textbox('clear');
                }
            }]
        });
        //------


    });

    function searchResult() {
        $('#checkresult-dg').datagrid('load', {
            bu: $('#checkresult-txt-bu').textbox('getValue'),
            outlet: $('#checkresult-txt-outlet').textbox('getValue'),
            loc: $('#checkresult-txt-loc').textbox('getValue'),
            name: $('#checkresult-txt-name').textbox('getValue'),
        });
    }

</script>